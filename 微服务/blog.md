# Blog



## 需求分析

### 用户

- 在**主页**查看**热门博客**
- 查看所有博客
- 通过**分类**查看分类下的博客
- 通过**标签**查看拥有该标签的博客
- 通过**关键字搜索**博客
- **评论**
- 通过**顺序**（时间，热门量，评论数）排列博客



### 管理员

- **登录**后台管理
- 管理博客
  - 增删改查
  - 添加标签
  - 设置分类
  - 删除评论
  - 回复评论
- **标签**
  - 查看标签
  - 添加标签
  - 删除标签
  - 修改标签
- 分类
  - 查看分类
  - 增加分类
  - 修改分类
  - 删除分类



### 功能

![1589424767504](blog.assets/1589424767504.png)



## 设计

使用Axure



### 前端展示

- 导航栏（用户）

  - 首页
  - 分类
  - 标签
  - 搜索
  - 关于作者

  

  

  

- 底部栏

  - 联系我

  

- 首页

  - 显示热门博客和top的标签和分类

  

- 博客内容

  - 标题
  - 内容
  - 时间
  - 评论
  - 推荐（同分类下）

  

- 分类页

  - 显示所有分类
  - 分类里显示分类博客

  

- 标签页

  - 显示所有标签
  - 标签里显示标签博客



### 后端管理

- 导航栏（管理员）

  - 博客管理
  - 分类管理
  - 标签管理

  

- 登录页

- 博客管理页

  - 增删改查

- 标签管理页

  - 管理标签下的博客

- 分类管理页

  - 管理分类下的博客



## 开发

### 实体类

blog 与其他实体类的关系

- 与Type多对一
- 与Tag  多对一
- 与comment一对多

![1589509166579](blog.assets/1589509166579.png)

- blog包含的内容

![1589509293399](blog.assets/1589509293399.png)



### 登录

使用shiro管理登录安全







## 问题

1.资源替换不生效

  删除target，重启



2.使用shiro无法登录

  登录controller中token的参数要填username，password

```
        UsernamePasswordToken token = new UsernamePasswordToken(username,password);
```



3.shiro登录无限跳转登录页面

 shiro拦截掉所有的admin下的请求包括登录，所以不能拦截登录请求



4.controller跳转失败，路径乱码

html页面跳转忘记加th： 模板



5.新增添加分类返回分类页显示500，但是能够添加成功